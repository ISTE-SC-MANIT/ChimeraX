{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Box from \"@material-ui/core/Box\";\nimport { useQuery } from \"relay-hooks\";\nimport query from \"../components/relay/queries/GetInvitationQuery\";\nimport IconButton from '@material-ui/core/IconButton';\nimport CheckIcon from '@material-ui/icons/Check';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AcceptInvitation from \"./acceptInvitation\";\nimport DeleteInvitationMutation from \"../components/relay/mutations/DeleteInvitationMutation\";\n\nvar ReceivedInvitation = function ReceivedInvitation(_ref) {\n  var refetchRef = _ref.refetchRef,\n      environment = _ref.environment,\n      setSuccessMessage = _ref.setSuccessMessage,\n      setErrorMessage = _ref.setErrorMessage,\n      refetch = _ref.refetch;\n\n  var _useQuery = useQuery(query),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      retry = _useQuery.retry,\n      isLoading = _useQuery.isLoading;\n\n  var _React$useState = React.useState({\n    userId: '',\n    invitationId: '',\n    name: ''\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      details = _React$useState2[0],\n      setDetails = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      open = _React$useState4[0],\n      setOpen = _React$useState4[1];\n\n  var handleClose = function handleClose() {\n    return setOpen(false);\n  };\n\n  if (isLoading) {\n    return __jsx(Box, {\n      ml: 32,\n      mt: 12\n    }, __jsx(CircularProgress, {\n      disableShrink: true,\n      size: 60\n    }));\n  }\n\n  var handleDelete = function handleDelete(id) {\n    var input = {\n      invitationId: id\n    };\n    DeleteInvitationMutation(environment, input, id, {\n      onCompleted: function onCompleted() {\n        setSuccessMessage('Deleted');\n      },\n      onError: function onError(err) {\n        setErrorMessage(err.message);\n      }\n    });\n  };\n\n  var sentInvitations = data.getInvitations.receivedInvitations;\n  return __jsx(React.Fragment, null, __jsx(AcceptInvitation, {\n    environment: environment,\n    name: details.name,\n    invitationId: details.invitationId,\n    userId: details.userId,\n    open: open,\n    handleClose: handleClose,\n    setSuccessMessage: setSuccessMessage,\n    setErrorMessage: setErrorMessage,\n    refetch: refetch\n  }), __jsx(List, null, sentInvitations.map(function (invitation) {\n    if (Boolean(invitation)) return __jsx(ListItem, null, __jsx(ListItemAvatar, null, __jsx(Avatar, {\n      alt: \"Remy Sharp\",\n      src: \"/dummy.png\"\n    })), __jsx(ListItemText, {\n      primary: invitation.sendersName,\n      secondary: invitation.sendersEmail\n    }), __jsx(ListItemSecondaryAction, null, __jsx(Tooltip, {\n      title: \"Accept Invitation\"\n    }, __jsx(IconButton, {\n      color: \"primary\",\n      \"aria-label\": \"Check\",\n      onClick: function onClick() {\n        setDetails({\n          userId: invitation.sendersId,\n          name: invitation.sendersName,\n          invitationId: invitation._id\n        });\n        setOpen(true);\n      }\n    }, __jsx(CheckIcon, null))), \"\\xA0\\xA0\", __jsx(Tooltip, {\n      title: \"Reject Invitation\"\n    }, __jsx(IconButton, {\n      color: \"secondary\",\n      \"aria-label\": \"delete\",\n      onClick: function onClick() {\n        return handleDelete(invitation._id);\n      }\n    }, __jsx(DeleteIcon, null)))));else return null;\n  })));\n};\n\nexport default ReceivedInvitation;","map":null,"metadata":{},"sourceType":"module"}